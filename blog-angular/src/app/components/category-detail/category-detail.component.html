<div class = "loading" *ngIf="!category">Cargando</div>
<div class = "container-fluid mt-3" *ngIf="category">
	<h1>{{category.name}}</h1>
	<hr>
	<div class ="loading" *ngIf="!posts">
		Cargando
	</div>

	<div class = "alert alert-warning" *ngIf="posts && posts.length ==0">
		No hay entradas en esta categoría
	</div>
	<!--<post-list [posts] = "posts" [identity]= "identity" [url] = "url"></post-list>-->

	<div class = "card-colums" *ngIf="posts && posts.length >=1">
		<article class = "card w-100" *ngFor="let post of posts">
			<div class = "card-header">
				<h3>
					<a [routerLink]= "['/entrada', post.id]">{{post.title}}</a>

				</h3>
			</div>

			<div class = "card-body">
				<div class = "post-image w-100" *ngIf="post.image">
					<img src = "{{url + 'post/image/' + post.image}}" >		
				</div>		
				
				<div class = "post-image w-100" *ngIf="!post.image">
					<img src = "https://via.placeholder.com/150" >		
				</div>	

				<div class = "post-buttons mt-3">
					<a [routerLink]= "['/entrada', post.id]" class = "btn btn-success mr-2">Leer</a>

					<span *ngIf="identity && identity.sub==post.user_id">
						<a [routerLink]= "['/editar-entrada', post.id]" class = "btn btn-warning mr-2">Editar</a>
						
						
						<button type="button" class="btn btn-primary" data-toggle="modal" 
						[attr.data-target] = "'#myModal'+post.id">
						  Borrar
						</button>

						
						<div class="modal" id="myModal{{post.id}}">
						  <div class="modal-dialog">
						    <div class="modal-content">

						      
						      <div class="modal-header">
						        <h4 class="modal-title">¿Seguro que quieres borrar esta entrada?</h4>
						        <button type="button" class="close" data-dismiss="modal">&times;</button>
						      </div>

						      
						      <div class="modal-body">
						        Vas a borrar definitivamete {{post.title}}
						      </div>

						     
						      <div class="modal-footer">
						        <button type="button" class="btn btn-warning" data-dismiss="modal">Salir</button>
						      </div>
						      <a (click)="deletePost(post.id)" class = "btn btn-danger" data-dismiss="modal">Borrar</a>

						    </div>
						  </div>
						</div>
					</span>
					
				</div>
			</div>
			
		</article>	
	</div>

</div>

